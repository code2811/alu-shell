#!/usr/bin/env bash
# This script parses the Apache access log, groups by IP and HTTP status code, and counts occurrences.

# Use awk to process the log and sort by occurrences
awk '{print $1, $9}' apache-access.log | 
    awk '{count[$1, $2]++} END {for (ip_http in count) print count[ip_http], ip_http}' | 
    sort -nr


