#!/usr/bin/env bash

# This script processes an Apache log file, groups visitors by IP and HTTP status code,
# and displays the data in the format OCCURRENCE_NUMBER IP HTTP_CODE

# Check if a file is provided as an argument
if [[ -z "$1" || ! -f "$1" ]]; then
    echo "Usage: $0 <logfile>"
    exit 1
fi

# Use awk to parse the log file, group by IP and HTTP code, and sort by occurrences
awk '{count[$1, $9]++} 
     END {for (i in count) {split(i, a, SUBSEP); print count[i], a[1], a[2]}}' "$1" | sort -nr



